<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Baraka Community & Family Centre</title>
  <meta name="description" content="Baraka Community & Family Centre — a SCIO in West Glasgow supporting young people, women, families, and refugees to thrive." />

  <!-- Fonts + CSS -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;800&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="assets/site.css">

  <!-- Page-specific (hero + stats + gallery layout only) -->
  <style>
    :root{ --bg:#EAF7F1; }
    html,body{ background:var(--bg) }
    .hero{display:grid;grid-template-columns:1.1fr .9fr;gap:28px;align-items:center;padding:32px 0}
    .eyebrow{display:inline-block;padding:8px 12px;border-radius:999px;background:#e0f2fe;color:#075985;font-weight:700;font-size:clamp(14px,1.8vw,18px);letter-spacing:.4px;text-transform:uppercase}
    .lead{color:#475569;font-size:18px}
    .hero-card{background:var(--card);border:1px solid var(--card-border);border-radius:18px;padding:20px;box-shadow:0 10px 30px rgba(15,23,42,.06)}
    .stats{display:grid;grid-template-columns:repeat(3,1fr);gap:14px;margin-top:18px}
    .stat{background:var(--card);border:1px solid var(--card-border);border-radius:14px;padding:14px;text-align:center}
    .stat h3{margin:0;font-size:24px}
    .donate-row{display:flex;gap:12px;flex-wrap:wrap}
    .prog-img{width:100%;height:160px;object-fit:cover;border-radius:12px;margin-bottom:8px}
    @media (max-width:900px){ .hero{grid-template-columns:1fr} }
  </style>
</head>
<body>

  <!-- HEADER -->
  <header class="site-header">
    <div class="container nav">
      <a class="logo" href="index.html">
        <img id="logo" src="assets/baraka-logo.png" alt="Baraka logo">
        <span id="siteName">Baraka Community & Family Centre</span>
      </a>
      <button class="menu-toggle" aria-expanded="false" aria-controls="site-menu">Menu</button>
      <nav id="site-menu" class="menu" aria-label="Main menu"></nav>
    </div>
  </header>

  <main class="container">
    <!-- HERO -->
    <section id="home" class="hero" aria-label="Intro">
      <div id="heroLeft"></div>
      <div id="heroRight" class="hero-card"></div>
    </section>

    <!-- ABOUT -->
    <section id="about" aria-label="About Baraka"></section>

    <!-- PROGRAMMES -->
    <section id="programmes" aria-label="What we run"></section>

    <!-- GET INVOLVED -->
    <section id="get-involved" aria-label="Get involved"></section>

    <!-- NEWS -->
    <section id="news" aria-label="Latest news"></section>

    <!-- DONATE -->
    <section id="donate" aria-label="Donate"></section>

    <!-- GALLERY (slideshow) -->
    <section id="gallery" aria-label="Photos"></section>

    <!-- CONTACT (homepage block) -->
    <section id="contact" aria-label="Contact"></section>
  </main>

  <!-- FOOTER -->
  <footer class="footer">
    <div class="container footer-row">
      <!-- Left: copy -->
      <div class="footer-copy">
        © <span id="year"></span> <span id="footerName">Baraka Community & Family Centre</span> · All rights reserved.
        <br><span class="notice">Registered SCIO <span id="scio"></span></span>
      </div>

      <!-- Middle: founders (web logos, uniform size) -->
      <div class="founder-logos" aria-label="Funders">
        <a href="https://www.tnlcommunityfund.org.uk/" target="_blank" rel="noopener">
          <img class="footer-logo" alt="The National Lottery Community Fund"
               src="https://images.brandfetch.io/tnlcommunityfund.org.uk/logo"
               onerror="this.onerror=null;this.src='https://logo.clearbit.com/tnlcommunityfund.org.uk'">
        </a>
        <a href="https://www.corra.scot/" target="_blank" rel="noopener">
          <img class="footer-logo" alt="Corra Foundation"
               src="https://images.brandfetch.io/corra.scot/logo"
               onerror="this.onerror=null;this.src='https://logo.clearbit.com/corra.scot'">
        </a>
        <a href="https://fareshare.org.uk/" target="_blank" rel="noopener">
          <img class="footer-logo" alt="FareShare UK"
               src="https://images.brandfetch.io/fareshare.org.uk/logo"
               onerror="this.onerror=null;this.src='https://logo.clearbit.com/fareshare.org.uk'">
        </a>
      </div>

      <!-- Right: OSCR (same size as founders) -->
      <div class="oscr">
        <img id="oscrBadge" class="footer-logo" src="assets/oscr-badge.jpg" alt="OSCR badge">
      </div>
    </div>
  </footer>

  <!-- Default content fallback -->
  <script id="default-content" type="application/json">
  {
    "site": {
      "name": "Baraka Community & Family Centre",
      "logo": "assets/baraka-logo.png",
      "brand": { "primary": "#6B3F18", "accent": "#22C55E", "bg": "#EAF7F1" }
    },
    "hero": {
      "eyebrow": "Scottish Charitable Incorporated Organisation (SCIO)",
      "title": "Safe spaces, practical support, and community for families in West Glasgow.",
      "lead": "Created by people with lived experience of seeking asylum, Baraka helps young people, women, families, and refugees thrive socially, emotionally, and economically.",
      "image": "assets/baraka-logo.png",
      "image_alt": "Community photo",
      "actions": [
        {"label":"Donate","href":"#donate"},
        {"label":"Volunteer","href":"get-involved.html","style":"secondary"}
      ],
      "stats": [
        {"value":"4+","label":"Active programmes"},
        {"value":"2024–25","label":"Lottery & Corra funded"},
        {"value":"Weekly","label":"Food distribution"}
      ],
      "right_kicker":"This month",
      "right_title":"What’s on at Baraka",
      "this_month":[
        "Family Connection Hub — Saturdays, community activities for parents & kids.",
        "Digital Hub — weekly sessions for parents and youths.",
        "Wellness Hub — peer support & wellbeing cafés.",
        "Food Distribution — weekly with FareShare."
      ],
      "right_note":"Want to join? "
    },
    "about": {
      "title": "Our story & mission",
      "story": "Baraka Community & Family Centre is a SCIO based in West Glasgow, created by individuals from Black and Ethnic Minority (BAMER) backgrounds who came to the UK as asylum seekers.",
      "values": "We provide culturally sensitive, community-led services built on empathy, dignity, solidarity, and empowerment.",
      "bullets": [
        "Mission: Support young people, women, families, and refugees to thrive through safe spaces, inclusive services, and access to opportunities.",
        "Funding: Supported by The National Lottery Community Fund and Corra Foundation; with monthly support from Scottish Sadaqah (distributed per Zakat principles)."
      ],
      "values_title": "Empathy • Dignity • Solidarity • Empowerment",
      "values_para": "Our programmes are co-designed with participants. Lived experience informs everything from outreach to facilitation.",
      "cta_title": "Need support?",
      "cta_note": "We’ll listen and connect you to the right activity or service.",
      "cta_label": "Get in touch",
      "cta_href": "contact.html"
    },
    "programmes_title": "What we run",
    "programmes": [
      {"title":"Family Connection Hub","description":"Monthly family activities to build confidence, connection, and joy for parents and children.","image":"assets/2.jpg","image_alt":"Family Connection Hub","link":"family-connection-hub.html","bullets":["Group activities and creative play","Peer support and signposting","Open to families across West Glasgow"]},
      {"title":"Digital Hub","description":"Weekly digital skills sessions for parents and youths to boost confidence and employability.","image":"assets/baraka-logo.png","image_alt":"Digital skills"},
      {"title":"Wellness Hub","description":"Peer-led wellbeing cafés and support circles focused on mental health, connection, and resilience.","image":"assets/baraka-logo.png","image_alt":"Wellbeing"},
      {"title":"Food Distribution Service","description":"Weekly food support in partnership with FareShare, prioritising families and refugees in need.","image":"assets/baraka-logo.png","image_alt":"Food distribution"},
      {"title":"Baraka Thrive","description":"Coming soon: employability and life-skills programme.","image":"data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 800 450'><rect fill='%23EAF7F1' width='800' height='450'/><text x='50%25' y='50%25' text-anchor='middle' dominant-baseline='middle' font-family='Inter,Arial' font-size='42' fill='%23718597'>Coming%20Soon</text></svg>","image_alt":"Coming soon","link":"baraka-thrive.html"},
      {"title":"EmpowerHer","description":"Coming soon: sewing, crochet, and women's wellbeing workshops.","image":"data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 800 450'><rect fill='%23EAF7F1' width='800' height='450'/><text x='50%25' y='50%25' text-anchor='middle' dominant-baseline='middle' font-family='Inter,Arial' font-size='42' fill='%23718597'>Coming%20Soon</text></svg>","image_alt":"Coming soon","link":"empowerher.html"}
    ],
    "get_involved": {
      "title":"Volunteer or partner with us",
      "volunteer": {"intro":"We welcome friendly volunteers for activities, mentoring, logistics, and translation.","roles":["Food distribution","Family activities","Digital skills","Wellbeing support","Other"],"email":"hello@baraka-centre.org"},
      "partner": {"intro":"We work with schools, faith groups, and local services. Refer a family or propose a joint activity.","email":"hello@baraka-centre.org","note":"We are based in West Glasgow. Meetings by appointment."}
    },
    "news_title": "Latest news",
    "news": [
      {"title":"New: Weekly Food Collection","body":"We’ve partnered with FareShare to distribute surplus food to local families. Volunteers welcome!","date":"1 Aug 2025"},
      {"title":"EmpowerHer Workshops","body":"Sewing and crochet sessions are open for registration. Child-friendly space available.","date":"20 Jul 2025"},
      {"title":"Grants & Support","body":"Thanks to The National Lottery Community Fund, Corra Foundation, and Scottish Sadaqah.","date":"10 Jun 2025"}
    ],
    "donate_title":"Support our work",
    "donate": {"intro":"Your donation helps us run weekly food support, skills workshops, and safe community spaces.","paypal":"","stripe":"","justgiving":"","note":"Baraka Community & Family Centre is a registered Scottish charity (SCIO). Gift Aid where eligible."},
    "gallery": { "title":"Photos", "subtitle":"A glimpse of life at Baraka", "images": [] },
    "contact_title":"Get in touch",
    "contact": {"email":"hello@baraka-centre.org","visit_note":"West Glasgow (meetings by appointment).","socials":{"facebook":"#","instagram":"#","whatsapp":"#"},"map_embed":""},
    "legal": {"scio":"SC052268","oscr_badge":"assets/oscr-badge.jpg"}
  }
  </script>

  <!-- Shared helpers -->
  <script src="assets/site.js"></script>

  <!-- Homepage render -->
  <script>
    /************ FALLBACK HELPERS (used only if SITE isn't ready) ************/
    const F_ESC = (s)=>String(s??'').replace(/[&<>\\"]/g,c=>({'&':'&amp;','<':'&lt;','>':'&gt;','"':'&quot;'}[c]));
    const F_HEX=(n)=>n.toString(16).padStart(2,'0');
    function F_hexToRgb(h){ const m=/^#?([\\da-f]{2})([\\da-f]{2})([\\da-f]{2})$/i.exec(h||''); return m?{r:parseInt(m[1],16),g:parseInt(m[2],16),b:parseInt(m[3],16)}:{r:255,g:255,b:255}; }
    function F_mix(a,b,t){ const A=F_hexToRgb(a),B=F_hexToRgb(b); const r=Math.round(A.r*(1-t)+B.r*t),g=Math.round(A.g*(1-t)+B.g*t),b2=Math.round(A.b*(1-t)+B.b*t); return `#${F_HEX(r)}${F_HEX(g)}${F_HEX(b2)}`; }
    function F_applyBrand(brand={}){ const root=document.documentElement; const primary=brand.primary||getComputedStyle(root).getPropertyValue('--brand').trim()||'#6B3F18'; const accent=brand.accent||getComputedStyle(root).getPropertyValue('--accent').trim()||'#22C55E'; const bg=brand.bg||getComputedStyle(root).getPropertyValue('--bg').trim()||'#EAF7F1'; root.style.setProperty('--brand',primary); root.style.setProperty('--brand-dark',primary); root.style.setProperty('--accent',accent); root.style.setProperty('--bg',bg); const card=F_mix(bg,accent,0.08), border=F_mix(F_mix(bg,accent,0.08),accent,0.15); root.style.setProperty('--card',card); root.style.setProperty('--card-border',border); }
    function F_buildHeader(d){
      const header=document.querySelector('header.site-header'); if(!header) return;
      const menu=header.querySelector('#site-menu'); const logo=header.querySelector('#logo'); const name=header.querySelector('#siteName');
      if(d.site?.logo && logo) logo.src=d.site.logo; if(d.site?.name && name) name.textContent=d.site.name;
      if(menu && !menu.children.length){
        const links=[{label:'Home',href:'index.html'},{label:'Programmes',href:'programmes.html'},{label:'Get involved',href:'get-involved.html'},{label:'Gallery',href:'gallery.html'},{label:'Contact',href:'contact.html'}];
        const here=(location.pathname.split('/').pop()||'index.html').toLowerCase();
        menu.innerHTML=links.map(l=>`<a class="${here===l.href.toLowerCase()?'active':''}" href="${l.href}">${F_ESC(l.label)}</a>`).join('');
      }
      const toggle=header.querySelector('.menu-toggle'); if(toggle && menu){
        toggle.addEventListener('click',()=>{ const open=menu.classList.toggle('open'); toggle.setAttribute('aria-expanded',open?'true':'false'); toggle.textContent=open?'Close':'Menu'; });
      }
    }
    function F_buildFooter(d){
      const y=document.getElementById('year'), fn=document.getElementById('footerName'), sc=document.getElementById('scio'), os=document.getElementById('oscrBadge');
      if(y) y.textContent=new Date().getFullYear();
      if(fn && d.site?.name) fn.textContent=d.site.name;
      if(sc && d.legal?.scio) sc.textContent=d.legal.scio;
      if(os && d.legal?.oscr_badge) os.src=d.legal.oscr_badge;
    }
    function F_initSlideshow(id, images, {interval=4000}={}){
      const root=document.getElementById(id); if(!root||!images?.length) return;
      const slides=root.querySelector('.slides'), dots=root.querySelector('.dots'); if(!slides||!dots) return;
      slides.innerHTML=images.map((g,i)=>`<div class="slide ${i===0?'active':''}"><img src="${F_ESC(g.src)}" alt="${F_ESC(g.alt||'Photo')}" loading="lazy"/>${g.caption?`<div class="caption">${F_ESC(g.caption)}</div>`:''}</div>`).join('');
      dots.innerHTML=images.map((_,i)=>`<button class="dot ${i===0?'active':''}" aria-label="Go to slide ${i+1}"></button>`).join('');
      const S=root.querySelectorAll('.slide'), D=root.querySelectorAll('.dot'), P=root.querySelector('[data-prev]'), N=root.querySelector('[data-next]');
      let idx=0,t=null; const render=()=>{S.forEach((s,i)=>s.classList.toggle('active',i===idx)); D.forEach((d,i)=>d.classList.toggle('active',i===idx));};
      const go=n=>{idx=(n+images.length)%images.length;render();}; const start=()=>{stop(); t=setInterval(()=>go(idx+1),interval);}; const stop=()=>{if(t) clearInterval(t); t=null;};
      P?.addEventListener('click',()=>{go(idx-1);start();}); N?.addEventListener('click',()=>{go(idx+1);start();}); D.forEach((d,i)=>d.addEventListener('click',()=>{idx=i;start();}));
      root.addEventListener('mouseenter',stop); root.addEventListener('mouseleave',start); render(); start();
    }
    function F_parseDefault(){ try{return JSON.parse(document.getElementById('default-content').textContent||'{}');}catch{return {};} }
    async function F_loadContent(){ try{ const r=await fetch('data/content.json',{cache:'no-store'}); if(!r.ok) throw 0; return await r.json(); }catch{ return F_parseDefault(); } }
    function F_E(){ return (window.SITE && SITE.esc) ? SITE.esc : F_ESC; }

    // Auto-discover gallery-#.ext if JSON gallery is empty
    function checkImage(src){ return new Promise(res=>{const i=new Image(); i.onload=()=>res(true); i.onerror=()=>res(false); i.src=src;}); }
    async function autoDiscoverGallery({prefix='assets/gallery-',exts=['.jpg','.jpeg','.png','.webp'],max=50,stopAfterMisses=8}={}){
      const out=[]; let misses=0;
      for(let n=1;n<=max;n++){
        let added=false;
        for(const ext of exts){
          const p=`${prefix}${n}${ext}`;
          /* eslint-disable-next-line no-await-in-loop */
          if(await checkImage(p)){ out.push({src:p,alt:'Photo'}); added=true; break; }
        }
        if(!added){ if(++misses>=stopAfterMisses) break; } else misses=0;
      }
      return out;
    }

    /* Build separate socials section (emoji icons).
       IMPORTANT CHANGE: we now render items even if links are "#"
       (placeholders show but are not clickable). */
    function buildSocialsSection(E, links={}){
      const defs = [
        {key:'facebook',  label:'Facebook',  emoji:'📘'},
        {key:'instagram', label:'Instagram', emoji:'📸'},
        {key:'whatsapp',  label:'WhatsApp',  emoji:'💬'}
      ];
      const items = [];
      defs.forEach(d=>{
        let href = (links[d.key] ?? '#').toString().trim();
        const isPlaceholder = (href === '' || href === '#');
        const attrs = isPlaceholder
          ? `href="#" aria-disabled="true" onclick="return false"`
          : `href="${E(href)}" target="_blank" rel="noopener"`;
        items.push(
          `<a class="social-pill${isPlaceholder?' is-placeholder':''}" ${attrs}>
             <span class="ico">${d.emoji}</span><span>${E(d.label)}</span>
           </a>`
        );
      });
      return `
        <div class="card">
          <h2 class="section-title" style="text-align:center">Follow us</h2>
          <div class="social-grid">${items.join('')}</div>
        </div>`;
    }

    /********************** PAGE RENDER ***************************************/
    async function renderHome(data){
      const E = F_E();

      // Brand + header/footer
      (window.SITE?.applyBrand || F_applyBrand)(data.site?.brand||{});
      (window.SITE?.buildHeader || F_buildHeader)(data);
      (window.SITE?.buildFooter || F_buildFooter)(data);

      /* HERO LEFT */
      const heroL=document.getElementById('heroLeft');
      const eyebrow=data.hero?.eyebrow?`<span class="eyebrow">${E(data.hero.eyebrow)}</span>`:'';
      const actions=(data.hero?.actions||[]).map(a=>`<a class="btn ${a.style==='secondary'?'secondary':''}" href="${E(a.href)}">${E(a.label)}</a>`).join(' ');
      const stats=(data.hero?.stats||[]).map(s=>`<div class="stat"><h3>${E(s.value)}</h3><div class="notice">${E(s.label)}</div></div>`).join('');
      heroL.innerHTML=`${eyebrow}<h1>${E(data.hero?.title||'')}</h1><p class="lead">${E(data.hero?.lead||'')}</p><div style="display:flex;gap:12px;margin-top:18px;flex-wrap:wrap">${actions}<a href="programmes.html" style="align-self:center;font-weight:700">See our programmes →</a></div><div class="stats">${stats}</div>`;

      /* HERO RIGHT */
      const heroR=document.getElementById('heroRight');
      const heroImg=data.hero?.image?`<img src="${E(data.hero.image)}" alt="${E(data.hero.image_alt||'Photo')}" loading="lazy" style="width:100%;border-radius:12px;margin-bottom:10px">`:'';
      const items=(data.hero?.this_month||[]).map(i=>`<li>${E(i)}</li>`).join('');
      heroR.innerHTML=`${heroImg}<div class="kicker">${E(data.hero?.right_kicker||'This month')}</div><h3 style="margin:6px 0 10px">${E(data.hero?.right_title||'What’s on at Baraka')}</h3><ul style="margin:0;padding-left:18px;color:var(--muted);line-height:1.6">${items}</ul><p class="notice" style="margin-top:12px">${data.hero?.right_note?E(data.hero.right_note):'Want to join? '}<a href="contact.html">Contact us</a> to check times and locations.</p>`;

      /* ABOUT */
      const about=document.getElementById('about');
      const bullets=(data.about?.bullets||[]).map(b=>`<li>${E(b)}</li>`).join('');
      about.innerHTML=`<div class="two"><div class="card"><div class="kicker">About us</div><h2 class="section-title">${E(data.about?.title||'Our story & mission')}</h2><p>${E(data.about?.story||'')}</p><p>${E(data.about?.values||'')}</p><ul>${bullets}</ul></div><div class="card"><div class="kicker">What we value</div><h2 class="section-title">${E(data.about?.values_title||'Empathy • Dignity • Solidarity • Empowerment')}</h2><p>${E(data.about?.values_para||'')}</p><div class="card" style="margin-top:10px"><h3 style="margin:0 0 6px">${E(data.about?.cta_title||'Need support?')}</h3><p class="notice" style="margin:0 0 10px">${E(data.about?.cta_note||'We’ll listen and connect you to the right activity or service.')}</p><a href="contact.html" class="btn">${E(data.about?.cta_label||'Get in touch')}</a></div></div></div>`;

      /* Ensure "Baraka Thrive" & "EmpowerHer" cards exist even if omitted */
      (function ensureComingSoonCards(){
        const svgDataUrl = "data:image/svg+xml;utf8," +
          "<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 800 450'>" +
          "<rect fill='%23EAF7F1' width='800' height='450'/>" +
          "<text x='50%25' y='50%25' text-anchor='middle' dominant-baseline='middle' font-family='Inter,Arial' font-size='42' fill='%23718597'>Coming%20Soon</text></svg>";
        if (!Array.isArray(data.programmes)) data.programmes = [];
        const upsert = (entry) => {
          const i = data.programmes.findIndex(
            p => (p.title || '').trim().toLowerCase() === entry.title.toLowerCase()
          );
          if (i === -1) data.programmes.push(entry);
          else {
            data.programmes[i] = { ...entry, ...data.programmes[i] };
            if (!data.programmes[i].link)  data.programmes[i].link  = entry.link;
            if (!data.programmes[i].image) data.programmes[i].image = entry.image;
          }
        };
        upsert({ title:'Baraka Thrive', description:'Coming soon: employability and life-skills programme.', link:'baraka-thrive.html', image:svgDataUrl, image_alt:'Coming soon' });
        upsert({ title:'EmpowerHer', description:'Coming soon: sewing, crochet, and women’s wellbeing workshops.', link:'empowerher.html', image:svgDataUrl, image_alt:'Coming soon' });
      })();

      /* PROGRAMMES (overrides + clickable tiles) */
      const progEl=document.getElementById('programmes');
      const progs=(data.programmes||[]).map(p=>{
        if(p.title && /family connection/i.test(p.title)){
          p={...p,image:'assets/2.jpg',image_alt:'Family Connection Hub',link:'family-connection-hub.html'};
        }
        if(p.title && /digital\s*hub/i.test(p.title)){
          p={...p,image:'assets/16.jpg',image_alt:'Digital Hub',link:'digital-hub.html'};
        }
        if(p.title && /wellness\s*hub/i.test(p.title)){
          p={...p,image:'assets/Refugee%20Festival/IMG_7217.jpg',image_alt:'Wellness Hub',link:'wellness-hub.html'};
        }
        if(p.title && /food distribution/i.test(p.title)){
          p={...p,image:'assets/Fareshare_Food/50.jpg',image_alt:'Food Distribution',link:'food-distribution.html'};
        }
        const inner=`${p.image?`<img class="prog-img" src="${E(p.image)}" alt="${E(p.image_alt||p.title||'Programme image')}" loading="lazy">`:''}<h3>${E(p.title||'')}</h3><p>${E(p.description||'')}</p>${p.bullets?`<ul>${p.bullets.map(li=>`<li>${E(li)}</li>`).join('')}</ul>`:''}`;
        return p.link
          ? `<a class="card program" href="${E(p.link)}" aria-label="${E(p.title)}" style="display:block">${inner}</a>`
          : `<div class="card program">${inner}</div>`;
      }).join('');
      progEl.innerHTML=`<div class="kicker">Programmes</div><h2 class="section-title">${E(data.programmes_title||'What we run')}</h2><div class="grid">${progs}</div>`;

      /* NEWS */
      const news = document.getElementById('news');
      const newsCards = (data.news||[]).map(n=>`
        <div class="card">
          <h3>${E(n.title)}</h3>
          <p>${E(n.body)}</p>
          ${n.date?`<p class="notice">Posted: <time>${E(n.date)}</time></p>`:''}
        </div>`).join('');
      news.innerHTML = `
        <div class="kicker">Updates</div>
        <h2 class="section-title">${E(data.news_title || 'Latest news')}</h2>
        <div class="grid">${newsCards}</div>
      `;

      /* DONATE */
      const donate = document.getElementById('donate');
      const dlinks = [];
      if (data.donate?.paypal)     dlinks.push(`<a class="btn"           href="${E(data.donate.paypal)}">Donate via PayPal</a>`);
      if (data.donate?.stripe)     dlinks.push(`<a class="btn secondary" href="${E(data.donate.stripe)}">Donate via Stripe</a>`);
      if (data.donate?.justgiving) dlinks.push(`<a class="btn"           href="${E(data.donate.justgiving)}">JustGiving</a>`);
      donate.innerHTML = `
        <div class="kicker">Donate</div>
        <h2 class="section-title">${E(data.donate_title || 'Support our work')}</h2>
        <p>${E(data.donate?.intro || 'Your donation helps us run weekly food support, skills workshops, and safe community spaces.')}</p>
        <div class="donate-row" style="margin:14px 0 6px">${dlinks.join(' ')}</div>
        <p class="notice">${E(data.donate?.note || '')}</p>
      `;

      /* GALLERY → slideshow (JSON first, then auto-discover) */
      const gal=document.getElementById('gallery');
      let imgs=data.gallery?.images||[];
      if(!imgs.length){ imgs = await autoDiscoverGallery(); }
      if(imgs.length){
        const slidesHtml=imgs.map((g,i)=>`<div class="slide ${i===0?'active':''}"><img src="${E(g.src)}" alt="${E(g.alt||'Photo')}" loading="lazy">${g.caption?`<div class="caption">${E(g.caption)}</div>`:''}</div>`).join('');
        const dotsHtml=imgs.map((_,i)=>`<button class="dot ${i===0?'active':''}" aria-label="Go to slide ${i+1}"></button>`).join('');
        const id='baraka-slideshow';
        gal.innerHTML=`<div class="kicker">${E(data.gallery?.title||'Photos')}</div><h2 class="section-title">${E(data.gallery?.subtitle||'A glimpse of life at Baraka')}</h2><div class="slideshow" id="${id}" aria-label="Photo slideshow"><div class="slides">${slidesHtml}</div><button class="nav prev" data-prev aria-label="Previous slide">‹</button><button class="nav next" data-next aria-label="Next slide">›</button><div class="dots">${dotsHtml}</div></div>`;
        (window.SITE?.initSlideshow || F_initSlideshow)(id, imgs, {interval:4000});
      } else {
        gal.innerHTML=`<div class="kicker">${E(data.gallery?.title||'Photos')}</div><h2 class="section-title">${E(data.gallery?.subtitle||'A glimpse of life at Baraka')}</h2><p class="notice">Add images to <code>data/content.json → gallery.images</code> or upload files named <code>assets/gallery-1.jpg</code>, <code>gallery-2.jpg</code>, …</p>`;
      }

      /* CONTACT (socials moved to their own section) */
      const contact = document.getElementById('contact');
      const fb = data.contact?.socials?.facebook || '#';
      const ig = data.contact?.socials?.instagram || '#';
      const wa = data.contact?.socials?.whatsapp || '#';

      contact.innerHTML = `
        <div class="kicker">Contact</div>
        <h2 class="section-title">${E(data.contact_title||'Get in touch')}</h2>

        <div class="two">
          <div class="card">
            <h3>Message us</h3>
            <form action="mailto:${E(data.contact?.email||'')}" method="post" enctype="text/plain"
                  onsubmit="alert('Thanks! We\\'ll reply soon.');">
              <div>
                <label class="notice">Name</label>
                <input required placeholder="Your name">
              </div>
              <div>
                <label class="notice">Email</label>
                <input required type="email" placeholder="you@example.com">
              </div>
              <div style="margin-top:10px">
                <label class="notice">Your message</label>
                <textarea rows="4" placeholder="How can we help?"></textarea>
              </div>
              <div style="margin-top:12px">
                <button class="btn" type="submit">Send</button>
              </div>
            </form>
            ${data.contact?.email?`<p class="notice" style="margin-top:8px">
              Email: <a href="mailto:${E(data.contact.email)}">${E(data.contact.email)}</a>
            </p>`:''}
          </div>

          <div class="card">
            <h3>Visit</h3>
            <p>${E(data.contact?.visit_note||'West Glasgow (meetings by appointment).')}</p>
            ${data.contact?.map_embed || ''}
          </div>
        </div>
      `;

      /* Build/insert the separate socials section (always render, placeholders allowed) */
      const socialsHtml = buildSocialsSection(E, { facebook: fb, instagram: ig, whatsapp: wa });
      let socialsSection = document.getElementById('socials');
      if (!socialsSection) {
        socialsSection = document.createElement('section');
        socialsSection.id = 'socials';
        socialsSection.setAttribute('aria-label','Follow Baraka');
        contact.insertAdjacentElement('afterend', socialsSection);
      }
      socialsSection.innerHTML = socialsHtml;
    }

    /********************** BOOTSTRAP ***************************************/
    (async function boot(){
      let data = window.__SITE__;
      if(!data){
        document.addEventListener('site:loaded', (e)=>{ renderHome(e.detail); }, { once:true });
      }
      if(!data){
        data = await F_loadContent();
        renderHome(data);
      }
    })();
  </script>
</body>
</html>






